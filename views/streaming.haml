%form{ :action => "/", :method => "post"}
   %label{:for => "search_value"} User:
   %input{:type => "text", :name => "email", :value => 'goncalo.pereira@7digital.com', :class => "text"}
   %label{:for => "password"} Password:
   %input{:type => "password", :name => "password", :value => 'gnappgnapp', :class => "text"}
   %label{:for => "formatId"} FormatId:
   %input{:type => "formatId", :name => "formatId", :value => '50', :class => "text"}
   %input{:type => "submit", :value => "Run", :class => "button"}

%h2 user/streamtrack
%p Allows user to stream a previously purchased track. Acquiring the track using this method will not decrement user's remaining downloads for this track.

%h3 Method specific parameters:
%p
   %b name type	use	description
%p
   %b oauth_token
   string	required	user's OAuth access token
%p
   %b trackId
   int	required	The unique identifier of the track to be downloaded
%p
   %b releaseId
   integer	required	The 7digital ID of the release the track that is being delivered appears on.
%p
   %b formatId
   integer	required	 7digital unique identifier of the requested stream format. For 64kbps streams please us formatId=50 and for 128kbps streams use formatId=26.
%p
   %b errorUrl
   url	optional	Callback URL in the event of an error

%h2 track/stream
%p This method allows the streaming of any track within the 7digital catalogue. The track does not need to be previously purchased. Only tracks available (and past their release date) in user's country will be available for streaming.


%h3 Method specific parameters:
%p
   %b name type	use	description
%p
   %b oauth_token / userId
   string	required	If you hold a 7digital oauth access token for the user streaming the track this needs to be provided. If not, you can pass your own identifier of the user (ID, GUID, username, etc). For streaming services that don't require users to sign, please contact us for alternative options of providing user identification (e.g. device IDs, autogenerated IDs stored in a cookie)
%p
   %b trackId
   int	required	The unique identifier of the track to be downloaded
%p
   %b releaseId
   integer	required	The 7digital ID of the release the track that is being delivered appears on.
%p
   %b formatId
   integer	optional	 7digital unique identifier of the requested stream format. For 64kbps MP3 streams please us formatId=50 and for 128kbps MP3 streams use formatId=26. The default formatId is 26 (128kbps MP3).
%p
   %b country
   string	optional	Two character country code. If not supplied, this request will default to GB

- if @user != nil then
   %h3 Run, first release, first track
   %p
      %b User Access Token:
      =  @user.oauth_access_token.token
   %p
      %b ReleaseId:
      = @releaseId
   %p
      %b TrackId:
      = @trackId

   %p
      %b FormatId:
      =  @formatId


   %p
      %b User Stream URL:
      %a(href="#{@userStream}")
         = @userStream
   %p
      %b Track Stream URL:
      %a(href="#{@trackStream}")
         = @trackStream
